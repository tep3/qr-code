<!doctype html>
<html lang="en" data-theme="silk">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>QR Forge â€” {{title}}</title>

    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2280%22>âš’ï¸</text></svg>"
      type="image/svg+xml"
    />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&family=Outfit:wght@300;400;500;600;700&family=Space+Mono:wght@400;700&family=Noto+Sans+Thai:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Tailwind + DaisyUI -->
    <link
      href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css"
      rel="stylesheet"
      type="text/css"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ["Outfit", "Noto Sans Thai", "sans-serif"],
              serif: ["DM Serif Display", "Noto Sans Thai", "serif"],
              mono: ["Space Mono", "monospace"],
            },
          },
        },
      };
    </script>

    <!-- HTMX -->
    <script
      src="https://cdn.jsdelivr.net/npm/htmx.org@2.0.8/dist/htmx.min.js"
      crossorigin="anonymous"
    ></script>

    <!-- i18n Script -->
    <script>
      (function () {
        const translations = {
          en: {
            nav_generate: "Generate",
            nav_scan: "Scan",
            nav_history: "History",
            footer_desc: "Free & Open QR Tool",
            footer_sub: "No accounts Â· No tracking Â· 100% free",

            // Home
            home_badge: "Free Â· No signup Â· Works offline",
            home_title_pre: "Craft your",
            home_title_post: "QR Code",
            home_desc:
              "Generate beautiful QR codes for links, WiFi, contacts and more â€” in seconds.",
            label_encode: "What do you want to encode?",
            tab_url: "URL",
            tab_text: "Text",
            tab_wifi: "WiFi",
            tab_vcard: "vCard",
            tab_email: "Email",
            tab_phone: "Phone",
            tab_sms: "SMS",
            tab_line: "LINE",
            tab_facebook: "Facebook",
            label_content: "Content",
            label_website_url: "Website URL",
            ph_website_url: "https://example.com",
            help_website_url: "Enter the full URL including https://",
            summary_style: "Customize Style",
            summary_style_desc: "Colors, size, label, logo & more",
            btn_generate: "Generate QR Code",

            // Style Options
            style_fg: "Foreground",
            style_bg: "Background",
            style_dot: "Dot Style",
            style_ec: "Error Correction",
            style_size: "Size",
            style_margin: "Margin",
            style_quiet_zone: "Quiet zone:",
            style_modules: "modules",
            label_text_opt: "Label Text (Optional)",
            label_size: "Size",
            label_pos: "Position",
            label_pos_top: "Top",
            label_pos_bottom: "Bottom",
            label_color: "Text Color",
            label_color_help: "Matches QR color by default",
            border_frame: "Border / Frame",
            border_color: "Border Color",

            // Preview
            preview_title: "Preview",
            preview_placeholder: "Your QR code will appear here",
            preview_help: "Fill in the content and hit Generate",
            badge_private: "Private",
            badge_instant: "Instant",
            badge_free: "100% Free",

            // Scan
            scan_badge: "AI Powered & Secure",
            scan_title: "Scan",
            scan_desc:
              "Point your camera at a QR code or upload an image to decode instantly.",
            camera_access: "Camera Access",
            camera_start_help: "Click below to start scanning via your webcam.",
            btn_start_camera: "Start Camera",
            or_upload: "OR Upload Image",
            upload_help: "Click to upload",
            upload_help_sub: "or drag and drop",
            scan_success: "Success!",
            scan_success_desc: "Content successfully decoded.",
            result_content: "Result Content",
            btn_copy: "Copy Content",
            btn_open: "Open Link",
            btn_back_scan: "Back to Scanner",
            scan_footer:
              "Secure Client-Side Processing. No data is sent to servers.",
            copied: "Copied!",
            err_no_qr:
              "No QR code found in this image. Please try another one.",

            // History
            history_title: "History",
            history_desc:
              "Your recently generated QR codes (saved locally on your device)",
            btn_clear_all: "Clear All",
            empty_title: "No QR Codes Yet",
            empty_desc:
              "You haven't generated any QR codes. Head back to the home page to create your first one!",
            btn_create_first: "Create QR Code",
            confirm_delete:
              "Are you sure you want to delete this QR code from history?",
            confirm_clear:
              "Are you sure you want to clear ALL history? This cannot be undone.",
            btn_save_history: "Save to History",
            saved: "Saved!",
          },
          th: {
            nav_generate: "à¸ªà¸£à¹‰à¸²à¸‡ QR",
            nav_scan: "à¸ªà¹à¸à¸™",
            nav_history: "à¸›à¸£à¸°à¸§à¸±à¸•à¸´",
            footer_desc: "à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸¡à¸·à¸­ QR à¸Ÿà¸£à¸µ & à¹‚à¸­à¹€à¸à¸™à¸‹à¸­à¸£à¹Œà¸ª",
            footer_sub: "à¹„à¸¡à¹ˆà¸¡à¸µà¸šà¸±à¸à¸Šà¸µ Â· à¹„à¸¡à¹ˆà¸¡à¸µà¸à¸²à¸£à¸•à¸´à¸”à¸•à¸²à¸¡ Â· à¸Ÿà¸£à¸µ 100%",

            // Home
            home_badge: "à¸Ÿà¸£à¸µ Â· à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡à¸ªà¸¡à¸±à¸„à¸£ Â· à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸­à¸­à¸Ÿà¹„à¸¥à¸™à¹Œà¹„à¸”à¹‰",
            home_title_pre: "à¸ªà¸£à¹‰à¸²à¸‡",
            home_title_post: "QR Code",
            home_desc:
              "à¸ªà¸£à¹‰à¸²à¸‡ QR Code à¸—à¸µà¹ˆà¸ªà¸§à¸¢à¸‡à¸²à¸¡à¸ªà¸³à¸«à¸£à¸±à¸šà¸¥à¸´à¸‡à¸à¹Œ, WiFi, à¸œà¸¹à¹‰à¸•à¸´à¸”à¸•à¹ˆà¸­ à¹à¸¥à¸°à¸­à¸·à¹ˆà¸™à¹† â€” à¹„à¸”à¹‰à¹ƒà¸™à¹„à¸¡à¹ˆà¸à¸µà¹ˆà¸§à¸´à¸™à¸²à¸—à¸µ",
            label_encode: "à¸„à¸¸à¸“à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸ªà¸£à¹‰à¸²à¸‡ QR à¸ˆà¸²à¸à¸­à¸°à¹„à¸£?",
            tab_url: "à¸¥à¸´à¸‡à¸à¹Œ",
            tab_text: "à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡",
            tab_wifi: "WiFi",
            tab_vcard: "à¸™à¸²à¸¡à¸šà¸±à¸•à¸£",
            tab_email: "à¸­à¸µà¹€à¸¡à¸¥",
            tab_phone: "à¹‚à¸—à¸£à¸¨à¸±à¸à¸—à¹Œ",
            tab_sms: "SMS",
            tab_line: "LINE",
            tab_facebook: "Facebook",
            label_content: "à¹€à¸™à¸·à¹‰à¸­à¸«à¸²",
            label_website_url: "à¸¥à¸´à¸‡à¸à¹Œà¹€à¸§à¹‡à¸šà¹„à¸‹à¸•à¹Œ",
            ph_website_url: "https://example.com",
            help_website_url: "à¹ƒà¸ªà¹ˆ URL à¹€à¸•à¹‡à¸¡à¸£à¸¹à¸›à¹à¸šà¸šà¸£à¸§à¸¡à¸–à¸¶à¸‡ https://",
            summary_style: "à¸›à¸£à¸±à¸šà¹à¸•à¹ˆà¸‡à¸ªà¹„à¸•à¸¥à¹Œ",
            summary_style_desc: "à¸ªà¸µ, à¸‚à¸™à¸²à¸”, à¹‚à¸¥à¹‚à¸à¹‰ à¹à¸¥à¸°à¸­à¸·à¹ˆà¸™à¹†",
            btn_generate: "à¸ªà¸£à¹‰à¸²à¸‡ QR Code",

            // Style Options
            style_fg: "à¸ªà¸µà¸«à¸¥à¸±à¸",
            style_bg: "à¸ªà¸µà¸à¸·à¹‰à¸™à¸«à¸¥à¸±à¸‡",
            style_dot: "à¸£à¸¹à¸›à¹à¸šà¸šà¸ˆà¸¸à¸”",
            style_ec: "à¸à¸²à¸£à¹à¸à¹‰à¹„à¸‚à¸‚à¹‰à¸­à¸œà¸´à¸”à¸à¸¥à¸²à¸”",
            style_size: "à¸‚à¸™à¸²à¸”",
            style_margin: "à¸‚à¸­à¸šà¸£à¸°à¸¢à¸°à¸«à¹ˆà¸²à¸‡",
            style_quiet_zone: "à¸à¸·à¹‰à¸™à¸—à¸µà¹ˆà¸§à¹ˆà¸²à¸‡:",
            style_modules: "à¸«à¸™à¹ˆà¸§à¸¢",
            label_text_opt: "à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸šà¸™ QR (à¹„à¸¡à¹ˆà¸šà¸±à¸‡à¸„à¸±à¸š)",
            label_size: "à¸‚à¸™à¸²à¸”",
            label_pos: "à¸•à¸³à¹à¸«à¸™à¹ˆà¸‡",
            label_pos_top: "à¸šà¸™",
            label_pos_bottom: "à¸¥à¹ˆà¸²à¸‡",
            label_color: "à¸ªà¸µà¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡",
            label_color_help: "à¹ƒà¸Šà¹‰à¸ªà¸µà¹€à¸”à¸µà¸¢à¸§à¸à¸±à¸š QR à¹‚à¸”à¸¢à¸„à¹ˆà¸²à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™",
            border_frame: "à¸à¸£à¸­à¸š / à¹€à¸Ÿà¸£à¸¡",
            border_color: "à¸ªà¸µà¸à¸£à¸­à¸š",

            // Preview
            preview_title: "à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡",
            preview_placeholder: "QR Code à¸‚à¸­à¸‡à¸„à¸¸à¸“à¸ˆà¸°à¸›à¸£à¸²à¸à¸à¸—à¸µà¹ˆà¸™à¸µà¹ˆ",
            preview_help: "à¸à¸£à¸­à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹à¸¥à¹‰à¸§à¸à¸”à¸›à¸¸à¹ˆà¸¡à¸ªà¸£à¹‰à¸²à¸‡",
            badge_private: "à¸ªà¹ˆà¸§à¸™à¸•à¸±à¸§",
            badge_instant: "à¸—à¸±à¸™à¸—à¸µ",
            badge_free: "à¸Ÿà¸£à¸µ 100%",

            // Scan
            scan_badge: "à¸›à¸¥à¸­à¸”à¸ à¸±à¸¢ & à¹ƒà¸Šà¹‰ AI",
            scan_title: "à¸ªà¹à¸à¸™",
            scan_desc:
              "à¸ªà¹ˆà¸­à¸‡à¸à¸¥à¹‰à¸­à¸‡à¹„à¸›à¸—à¸µà¹ˆ QR code à¸«à¸£à¸·à¸­à¸­à¸±à¸›à¹‚à¸«à¸¥à¸”à¸£à¸¹à¸›à¸ à¸²à¸à¹€à¸à¸·à¹ˆà¸­à¸­à¹ˆà¸²à¸™à¸„à¹ˆà¸²à¸—à¸±à¸™à¸—à¸µ",
            camera_access: "à¸à¸²à¸£à¹€à¸‚à¹‰à¸²à¸–à¸¶à¸‡à¸à¸¥à¹‰à¸­à¸‡",
            camera_start_help: "à¸„à¸¥à¸´à¸à¸”à¹‰à¸²à¸™à¸¥à¹ˆà¸²à¸‡à¹€à¸à¸·à¹ˆà¸­à¹€à¸£à¸´à¹ˆà¸¡à¸ªà¹à¸à¸™à¸œà¹ˆà¸²à¸™à¸à¸¥à¹‰à¸­à¸‡",
            btn_start_camera: "à¹€à¸£à¸´à¹ˆà¸¡à¹€à¸›à¸´à¸”à¸à¸¥à¹‰à¸­à¸‡",
            or_upload: "à¸«à¸£à¸·à¸­ à¸­à¸±à¸›à¹‚à¸«à¸¥à¸”à¸£à¸¹à¸›à¸ à¸²à¸",
            upload_help: "à¸„à¸¥à¸´à¸à¹€à¸à¸·à¹ˆà¸­à¸­à¸±à¸›à¹‚à¸«à¸¥à¸”",
            upload_help_sub: "à¸«à¸£à¸·à¸­à¸¥à¸²à¸à¹„à¸Ÿà¸¥à¹Œà¸¡à¸²à¸§à¸²à¸‡",
            scan_success: "à¸ªà¸³à¹€à¸£à¹‡à¸ˆ!",
            scan_success_desc: "à¸­à¹ˆà¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸£à¸µà¸¢à¸šà¸£à¹‰à¸­à¸¢à¹à¸¥à¹‰à¸§",
            result_content: "à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸µà¹ˆà¹„à¸”à¹‰",
            btn_copy: "à¸„à¸±à¸”à¸¥à¸­à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥",
            btn_open: "à¹€à¸›à¸´à¸”à¸¥à¸´à¸‡à¸à¹Œ",
            btn_back_scan: "à¸à¸¥à¸±à¸šà¹„à¸›à¸ªà¹à¸à¸™",
            scan_footer:
              "à¸›à¸£à¸°à¸¡à¸§à¸¥à¸œà¸¥à¸šà¸™à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸‚à¸­à¸‡à¸„à¸¸à¸“à¸­à¸¢à¹ˆà¸²à¸‡à¸›à¸¥à¸­à¸”à¸ à¸±à¸¢ à¹„à¸¡à¹ˆà¸¡à¸µà¸à¸²à¸£à¸ªà¹ˆà¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸‚à¸¶à¹‰à¸™ Server",
            copied: "à¸„à¸±à¸”à¸¥à¸­à¸à¹à¸¥à¹‰à¸§!",
            err_no_qr: "à¹„à¸¡à¹ˆà¸à¸š QR code à¹ƒà¸™à¸£à¸¹à¸›à¸ à¸²à¸à¸™à¸µà¹‰ à¸à¸£à¸¸à¸“à¸²à¸¥à¸­à¸‡à¹ƒà¸«à¸¡à¹ˆà¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡",

            // History
            history_title: "à¸›à¸£à¸°à¸§à¸±à¸•à¸´",
            history_desc: "QR codes à¸—à¸µà¹ˆà¸„à¸¸à¸“à¸ªà¸£à¹‰à¸²à¸‡à¸¥à¹ˆà¸²à¸ªà¸¸à¸” (à¸šà¸±à¸™à¸—à¸¶à¸à¹ƒà¸™à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸‚à¸­à¸‡à¸„à¸¸à¸“)",
            btn_clear_all: "à¸¥à¹‰à¸²à¸‡à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”",
            empty_title: "à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸¡à¸µà¸›à¸£à¸°à¸§à¸±à¸•à¸´",
            empty_desc:
              "à¸„à¸¸à¸“à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¹„à¸”à¹‰à¸ªà¸£à¹‰à¸²à¸‡ QR code à¹€à¸¥à¸¢ à¸à¸¥à¸±à¸šà¹„à¸›à¸—à¸µà¹ˆà¸«à¸™à¹‰à¸²à¸«à¸¥à¸±à¸à¹€à¸à¸·à¹ˆà¸­à¹€à¸£à¸´à¹ˆà¸¡à¸ªà¸£à¹‰à¸²à¸‡!",
            btn_create_first: "à¸ªà¸£à¹‰à¸²à¸‡ QR Code",
            confirm_delete: "à¸„à¸¸à¸“à¹à¸™à¹ˆà¹ƒà¸ˆà¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆà¸—à¸µà¹ˆà¸ˆà¸°à¸¥à¸š QR code à¸™à¸µà¹‰à¸ˆà¸²à¸à¸›à¸£à¸°à¸§à¸±à¸•à¸´?",
            confirm_clear:
              "à¸„à¸¸à¸“à¹à¸™à¹ˆà¹ƒà¸ˆà¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆà¸—à¸µà¹ˆà¸ˆà¸°à¸¥à¹‰à¸²à¸‡à¸›à¸£à¸°à¸§à¸±à¸•à¸´à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”? à¸à¸²à¸£à¸à¸£à¸°à¸—à¸³à¸™à¸µà¹‰à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸¢à¹‰à¸­à¸™à¸à¸¥à¸±à¸šà¹„à¸”à¹‰",
            btn_save_history: "à¸šà¸±à¸™à¸—à¸¶à¸à¸›à¸£à¸°à¸§à¸±à¸•à¸´",
            saved: "à¸šà¸±à¸™à¸—à¸¶à¸à¹à¸¥à¹‰à¸§!",
          },
        };

        window.t = function (key) {
          const lang = localStorage.getItem("qrforge_lang") || "en";
          return translations[lang][key] || key;
        };

        window.currentLang = function () {
          return localStorage.getItem("qrforge_lang") || "en";
        };

        window.setLanguage = function (lang) {
          localStorage.setItem("qrforge_lang", lang);
          updatePageContent();
          updateLanguageUI();

          // Close dropdown if exists
          const elem = document.activeElement;
          if (elem && elem.tagName === "A") {
            elem.blur();
          }
        };

        function updatePageContent() {
          const lang = window.currentLang();
          const data = translations[lang];

          // 1. Update elements with data-i18n (Static content)
          document.querySelectorAll("[data-i18n]").forEach((el) => {
            const key = el.getAttribute("data-i18n");
            if (data[key]) {
              if (el.tagName === "INPUT" && el.getAttribute("placeholder")) {
                el.placeholder = data[key];
              } else {
                el.innerText = data[key];
              }
            }
          });

          // 2. Dynamic Fallbacks (Best effort for dynamic forms/labels)
          if (lang === "th") {
            const dynamicMaps = {
              "Network Name (SSID)": "à¸Šà¸·à¹ˆà¸­à¹€à¸„à¸£à¸·à¸­à¸‚à¹ˆà¸²à¸¢ (SSID)",
              Password: "à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™",
              Encryption: "à¸à¸²à¸£à¹€à¸‚à¹‰à¸²à¸£à¸«à¸±à¸ª",
              "Hidden Network": "à¹€à¸„à¸£à¸·à¸­à¸‚à¹ˆà¸²à¸¢à¸‹à¹ˆà¸­à¸™",
              "First Name": "à¸Šà¸·à¹ˆà¸­à¸ˆà¸£à¸´à¸‡",
              "Last Name": "à¸™à¸²à¸¡à¸ªà¸à¸¸à¸¥",
              Organization: "à¸­à¸‡à¸„à¹Œà¸à¸£",
              "Job Title": "à¸•à¸³à¹à¸«à¸™à¹ˆà¸‡à¸‡à¸²à¸™",
              "Mobile Phone": "à¹€à¸šà¸­à¸£à¹Œà¸¡à¸·à¸­à¸–à¸·à¸­",
              "Work Phone": "à¹€à¸šà¸­à¸£à¹Œà¸—à¸µà¹ˆà¸—à¸³à¸‡à¸²à¸™",
              Email: "à¸­à¸µà¹€à¸¡à¸¥",
              Website: "à¹€à¸§à¹‡à¸šà¹„à¸‹à¸•à¹Œ",
              Street: "à¸–à¸™à¸™/à¸‹à¸­à¸¢",
              City: "à¹€à¸¡à¸·à¸­à¸‡/à¹€à¸‚à¸•",
              Zipcode: "à¸£à¸«à¸±à¸ªà¹„à¸›à¸£à¸©à¸“à¸µà¸¢à¹Œ",
              Country: "à¸›à¸£à¸°à¹€à¸—à¸¨",
              Subject: "à¸«à¸±à¸§à¸‚à¹‰à¸­",
              Message: "à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡",
              "Phone Number": "à¹€à¸šà¸­à¸£à¹Œà¹‚à¸—à¸£à¸¨à¸±à¸à¸—à¹Œ",
              "Facebook URL": "à¸¥à¸´à¸‡à¸à¹Œ Facebook",
              "Enter text": "à¸à¸£à¸­à¸à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡",
              "Enter phone number": "à¸à¸£à¸­à¸à¹€à¸šà¸­à¸£à¹Œà¹‚à¸—à¸£à¸¨à¸±à¸à¸—à¹Œ",
              "Enter email": "à¸à¸£à¸­à¸à¸­à¸µà¹€à¸¡à¸¥",
            };

            // Translate Labels
            document
              .querySelectorAll(
                "label span.label-text, span.label-text-alt, option",
              )
              .forEach((el) => {
                const txt = el.innerText.trim();
                if (dynamicMaps[txt]) el.innerText = dynamicMaps[txt];
              });

            // Translate Placeholders
            document
              .querySelectorAll("input[placeholder], textarea[placeholder]")
              .forEach((el) => {
                const ph = el.getAttribute("placeholder");
                if (ph && dynamicMaps[ph])
                  el.setAttribute("placeholder", dynamicMaps[ph]);
              });
          }
        }

        function updateLanguageUI() {
          const lang = window.currentLang();
          // Update Icons / Text in Dropdown Button
          const desktopIcon = document.getElementById("lang-icon-desktop");
          if (desktopIcon) desktopIcon.innerText = lang === "en" ? "ğŸ‡¬ğŸ‡§" : "ğŸ‡¹ğŸ‡­";

          const mobileIcon = document.getElementById("lang-icon-mobile");
          if (mobileIcon) mobileIcon.innerText = lang === "en" ? "ğŸ‡¬ğŸ‡§" : "ğŸ‡¹ğŸ‡­";
        }

        // Initialize on load
        document.addEventListener("DOMContentLoaded", () => {
          updatePageContent();
          updateLanguageUI();
        });

        // Re-run on HTMX swaps (This is the key fix for navigation)
        // htmx:afterSwap ensures content is in DOM before we try to translate it
        document.addEventListener("htmx:afterSwap", () => {
          updatePageContent();
        });
      })();
    </script>

    <style>
      .nav-link {
        position: relative;
        transition: color 0.2s ease;
      }
      .nav-link::after {
        content: "";
        position: absolute;
        bottom: -4px;
        left: 50%;
        width: 0;
        height: 2px;
        background: oklch(var(--p));
        border-radius: 1px;
        transition:
          width 0.25s ease,
          left 0.25s ease;
      }
      .nav-link:hover::after,
      .nav-link.active::after {
        width: 100%;
        left: 0;
      }
      .nav-link:hover,
      .nav-link.active {
        color: oklch(var(--p));
      }

      .htmx-indicator {
        display: none;
      }
      .htmx-request .htmx-indicator,
      .htmx-request.htmx-indicator {
        display: inline-flex;
      }

      @keyframes fadeUp {
        from {
          opacity: 0;
          transform: translateY(16px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .animate-fade-up {
        animation: fadeUp 0.5s ease-out both;
      }
      .delay-1 {
        animation-delay: 0.08s;
      }
      .delay-2 {
        animation-delay: 0.16s;
      }
      .delay-3 {
        animation-delay: 0.24s;
      }
      .delay-4 {
        animation-delay: 0.32s;
      }
      #form-fields > * {
        animation: fadeUp 0.2s ease-out both;
      }
    </style>

    <link rel="stylesheet" href="/css/custom.css" />
  </head>

  <body class="min-h-screen font-sans bg-base-100 text-base-content">
    <!-- NAVBAR -->
    <nav
      class="sticky top-0 z-50 bg-base-100/80 backdrop-blur-lg border-b border-base-200"
    >
      <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between h-16">
          <a
            href="/"
            hx-get="/"
            hx-select="#main-content"
            hx-target="#main-content"
            hx-push-url="true"
            class="flex items-center gap-2.5 group"
          >
            <span
              class="text-2xl transition-transform group-hover:rotate-12 duration-300"
              >âš’ï¸</span
            >
            <span class="text-xl font-serif tracking-tight">
              <span class="text-primary">QR</span> Forge
            </span>
          </a>

          <!-- Desktop Links -->
          <div class="hidden sm:flex items-center gap-6">
            <a
              href="/"
              hx-get="/"
              hx-select="#main-content"
              hx-target="#main-content"
              hx-push-url="true"
              class="nav-link text-sm font-medium {{navGenerate}}"
              data-i18n="nav_generate"
              >Generate</a
            >
            <a
              href="/scan"
              hx-get="/scan"
              hx-select="#main-content"
              hx-target="#main-content"
              hx-push-url="true"
              class="nav-link text-sm font-medium {{navScan}}"
              data-i18n="nav_scan"
              >Scan</a
            >
            <a
              href="/history"
              hx-get="/history"
              hx-select="#main-content"
              hx-target="#main-content"
              hx-push-url="true"
              class="nav-link text-sm font-medium {{navHistory}}"
            >
              <span data-i18n="nav_history">History</span>
              <span
                id="history-badge"
                class="ml-1 badge badge-xs badge-primary font-bold hidden"
              ></span>
            </a>

            <!-- Modern Language Switcher (Desktop) -->
            <div class="dropdown dropdown-end ml-2">
              <div
                tabindex="0"
                role="button"
                class="btn btn-ghost btn-circle btn-sm border border-base-200/50 hover:bg-base-200"
              >
                <span id="lang-icon-desktop" class="text-lg">ğŸ‡¬ğŸ‡§</span>
              </div>
              <ul
                tabindex="0"
                class="dropdown-content z-[1] menu p-2 shadow-lg bg-base-100 rounded-box w-40 mt-2 border border-base-200"
              >
                <li>
                  <a onclick="setLanguage('en')" class="gap-3"
                    ><span class="text-lg">ğŸ‡¬ğŸ‡§</span> English</a
                  >
                </li>
                <li>
                  <a onclick="setLanguage('th')" class="gap-3"
                    ><span class="text-lg">ğŸ‡¹ğŸ‡­</span> à¹„à¸—à¸¢</a
                  >
                </li>
              </ul>
            </div>
          </div>

          <!-- Mobile Toggle & Lang -->
          <div class="sm:hidden flex items-center gap-2">
            <!-- Modern Language Switcher (Mobile) -->
            <div class="dropdown dropdown-end">
              <div
                tabindex="0"
                role="button"
                class="btn btn-ghost btn-circle btn-xs border border-base-200/50"
              >
                <span id="lang-icon-mobile" class="text-base">ğŸ‡¬ğŸ‡§</span>
              </div>
              <ul
                tabindex="0"
                class="dropdown-content z-[1] menu p-2 shadow-lg bg-base-100 rounded-box w-36 mt-2 border border-base-200"
              >
                <li>
                  <a onclick="setLanguage('en')" class="gap-3">ğŸ‡¬ğŸ‡§ English</a>
                </li>
                <li><a onclick="setLanguage('th')" class="gap-3">ğŸ‡¹ğŸ‡­ à¹„à¸—à¸¢</a></li>
              </ul>
            </div>

            <button
              onclick="
                document
                  .getElementById('mobile-menu')
                  .classList.toggle('hidden')
              "
              class="btn btn-ghost btn-sm btn-square"
            >
              <svg
                class="w-5 h-5"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4 6h16M4 12h16M4 18h16"
                />
              </svg>
            </button>
          </div>
        </div>
      </div>

      <!-- Mobile Menu Links -->
      <div
        id="mobile-menu"
        class="hidden sm:hidden bg-base-100 border-t border-base-200"
      >
        <div class="px-4 py-3 space-y-1">
          <a
            href="/"
            hx-get="/"
            hx-select="#main-content"
            hx-target="#main-content"
            hx-push-url="true"
            onclick="
              document.getElementById('mobile-menu').classList.add('hidden')
            "
            class="mobile-nav-link block px-3 py-2.5 rounded-lg text-sm font-medium hover:bg-base-200 {{navGenerate}}"
            >ğŸ¨ <span data-i18n="nav_generate">Generate</span></a
          >
          <a
            href="/scan"
            hx-get="/scan"
            hx-select="#main-content"
            hx-target="#main-content"
            hx-push-url="true"
            onclick="
              document.getElementById('mobile-menu').classList.add('hidden')
            "
            class="mobile-nav-link block px-3 py-2.5 rounded-lg text-sm font-medium hover:bg-base-200 {{navScan}}"
            >ğŸ“· <span data-i18n="nav_scan">Scan</span></a
          >
          <a
            href="/history"
            hx-get="/history"
            hx-select="#main-content"
            hx-target="#main-content"
            hx-push-url="true"
            onclick="
              document.getElementById('mobile-menu').classList.add('hidden')
            "
            class="mobile-nav-link block px-3 py-2.5 rounded-lg text-sm font-medium hover:bg-base-200 {{navHistory}}"
          >
            ğŸ“‹ <span data-i18n="nav_history">History</span>
            <span
              id="history-badge-mobile"
              class="ml-1 badge badge-xs badge-primary font-bold hidden"
            ></span>
          </a>
        </div>
      </div>
    </nav>

    <!-- MAIN -->
    <main id="main-content" class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      {{content}}
    </main>

    <!-- FOOTER -->
    <footer class="border-t border-base-200 mt-20">
      <div
        class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8 flex flex-col sm:flex-row items-center justify-between gap-4 text-sm text-base-content/40"
      >
        <p>
          <span class="font-serif text-base-content/60">QR Forge</span> â€”
          <span data-i18n="footer_desc">Free & Open QR Tool</span>
        </p>
        <p class="font-mono text-xs tracking-wide" data-i18n="footer_sub">
          No accounts Â· No tracking Â· 100% free
        </p>
      </div>
    </footer>

    <script>
      (function () {
        // à¸­à¸±à¸›à¹€à¸”à¸•à¸•à¸±à¸§à¹€à¸¥à¸‚à¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™à¸›à¸£à¸°à¸§à¸±à¸•à¸´à¸•à¸­à¸™à¹‚à¸«à¸¥à¸”à¸«à¸™à¹‰à¸²à¹à¸£à¸
        try {
          var h = JSON.parse(localStorage.getItem("qrforge_history") || "[]");
          if (h.length > 0) {
            ["history-badge", "history-badge-mobile"].forEach(function (id) {
              var el = document.getElementById(id);
              if (el) {
                el.textContent = h.length;
                el.classList.remove("hidden");
              }
            });
          }
        } catch (e) {}
      })();

      // à¸­à¸±à¸›à¹€à¸”à¸•à¸ªà¸–à¸²à¸™à¸° Active à¸‚à¸­à¸‡à¹€à¸¡à¸™à¸¹à¹€à¸§à¸¥à¸²à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸«à¸™à¹‰à¸²à¸”à¹‰à¸§à¸¢ HTMX
      document.body.addEventListener("htmx:afterSwap", function (event) {
        if (event.detail.target.id === "main-content") {
          const path = window.location.pathname;

          // à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸ªà¸–à¸²à¸™à¸°à¸‚à¸­à¸‡à¹€à¸¡à¸™à¸¹ Desktop
          document.querySelectorAll(".nav-link").forEach((link) => {
            if (link.getAttribute("href") === path) {
              link.classList.add("active");
            } else {
              link.classList.remove("active");
            }
          });

          // à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸ªà¸–à¸²à¸™à¸°à¸‚à¸­à¸‡à¹€à¸¡à¸™à¸¹ Mobile
          document.querySelectorAll(".mobile-nav-link").forEach((link) => {
            if (link.getAttribute("href") === path) {
              link.classList.add("bg-base-200");
            } else {
              link.classList.remove("bg-base-200");
            }
          });
        }
      });
    </script>
    <script src="/js/app.js" defer></script>
  </body>
</html>
